name: zzzzzzz

on:
  workflow_dispatch:

defaults:
  run:
    shell: bash

env:
  LINK: https://mega.nz/file/lxMHwTxS#vTgkzV0RCMn8tBda1mqrZH8vZYywOtZh_iPHRPzKuxo
  LOGO: https://www.brandyports.com/attachments/cat33-jpg.14/
  TG_TOKEN: ${{ secrets.TG_TOKEN }}
  TG_ID: ${{ secrets.TG_ID }}
  SF_USERNAME: ${{ secrets.SF_USER }}
  SF_PASSWORD: ${{ secrets.SF_PASWORD }}
  GAME_NAME: ğ—Ÿğ—¶ğ—³ğ—² ğ—¶ğ—» ğ—¦ğ—®ğ—»ğ˜ğ—® ğ—–ğ—¼ğ˜‚ğ—»ğ˜ğ˜† [ğ˜ƒğŸ¬.ğŸ³.ğŸ®] [ğ—•ğ—¼ğ—¹ğ—± ğ—•ğ—®ğ˜€ğ—µ ğ—¦ğ˜ğ˜‚ğ—±ğ—¶ğ—¼ğ˜€]
  UPLOAD: asoy-gaming
  TZ: Asia/Jakarta
  LINK_MIRROR: https://sourceforge.net/projects/${UPLOAD}/files/$(cd $PWD && ls *apk)/download

jobs:
  deploy-android:
    name: Asoy-Gaming
    runs-on: ubuntu-latest
    container:
      image: anggit86/ubuntu:asoy

    steps:
      - uses: actions/checkout@v3
      
      - name: SSH agent ğŸ’»
        uses: fastai/workflows/ssh@master
        with:
          ssh_key: ${{ secrets.SSH_PRIVATE_KEY }}
          key_file: frs.sourceforge.net

      - name: Download ğŸ“¥
        run: |
          mega-get ${LINK} $PWD

      - name: Upload ğŸ“¤
        run: |
          sshpass -p ${SF_PASSWORD} scp $PWD/*.apk ${SF_USERNAME}@frs.sourceforge.net:/home/frs/project/${UPLOAD}

      - name: Release ğŸ“
        run: |
          telegram_message() {
               curl -v "https://api.telegram.org/bot""${TG_TOKEN}""/sendPhoto?chat_id=""${TG_ID}""${ARGS_EXTRA}" -H 'Content-Type: multipart/form-data' \
	           --form photo="LOGO" \
               -F "parse_mode=html" \
               -F caption="$1"
          }
          TXT_CAPTION="${GAME_NAME}
          
          <b>â”â”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</b>
          <b>â”ƒğŸ“¥ Download Link:</b> <a href=\"${LINK_MIRROR}\">Here</a>
          <b>â”ƒğŸ›¡ï¸ Ukuran: $(cd $PWD && ls -lh *apk | cut -d ' ' -f5)</b>
          <b>â”ƒğŸ“… Tanggal: $(date +%d\ %B\ %Y)</b>
          <b>â”ƒğŸ•” Waktu: $(date +%T)</b>
          <b>â”—â”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</b>
          
          <b>â”â”â”€â”€Extras</b>
          <b>â”ƒâ¥ Gallery Unlocked Mod</b>
          <b>â”ƒâ¥ Inc. Patch</b>
          <b>â”ƒâ¥ Walkthrough Pdf</b>
          <b>â”—â”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</b>"
          TG_TEXT="${TXT_CAPTION}"
          telegram_message "$TG_TEXT"
